<script lang="ts">
  // import { paintOnScroll } from "$lib/utils/paint-on-scroll";

  const paintOnScroll = (node: SVGElement) => {
    const paths = node.querySelectorAll("path");

    window.addEventListener("scroll", () => {
      let scrollPercentage =
        (document.documentElement.scrollTop + document.body.scrollTop) /
        (document.documentElement.scrollHeight -
          document.documentElement.clientHeight);

      paths.forEach((path, index) => {
        const pathLength = path.getTotalLength();

        path.setAttribute("stroke-dasharray", pathLength.toString());
        path.setAttribute("stroke-dashoffset", pathLength.toString());

        let drawLength = pathLength * scrollPercentage;
        path.setAttribute(
          "stroke-dashoffset",
          (pathLength - drawLength).toString()
        );
      });
    });

    return {
      destroy() {
        window.removeEventListener("scroll", () => {});
      },
    };
  };
</script>

<div>
  <svg
    use:paintOnScroll
    viewBox="0 0 50 500"
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="none"
  >
    <path
      d="M -225.176 249.273 C -174.166 249.606 -123.328 249.008 -93.586 249.008 C -84.776 250.213 -78.941 250.501 -74.264 250.396 C -60.039 250.076 -45.816 241.878 -31.679 246.47 C -30.112 246.979 -28.341 247.797 -26.323 249.008 C -21.826 251.706 -12.142 256.975 -8.166 254.675 C -1.249 250.675 3.201 242.078 10.637 242.078 C 17.553 242.078 25.316 258.358 31.195 257.858 C 36.609 257.858 37.852 252.953 45.814 242.96 C 48.303 239.835 56.806 241.985 59.318 244.953 C 65.512 252.272 68.454 256.609 73.842 256.196 C 79.65 256.196 86.875 245.059 93.618 240.665 C 95.362 239.528 97.174 239.947 98.931 240.904 C 109.242 246.521 110.517 249.619 117.026 250.008 C 122.836 250.356 133.28 248.508 139.851 248.508 C 160.255 248.508 151.955 248.508 163.541 248.508 C 182.042 248.508 182.558 249.675 204.003 249.675 C 230.46 249.675 215.588 247.841 272.824 248.508"
      stroke="#B1C5FF"
      stroke-width="1"
      fill="none"
      style="transform-box: fill-box; transform-origin: 50% 50%;"
      transform="matrix(0, 1, -1, 0, 0.000012, 0.000003)"
    ></path>
    <path
      d="M -225.78 244.141 C -174.77 244.474 -123.932 243.876 -94.19 243.876 C -85.38 245.081 -79.545 245.369 -74.868 245.264 C -60.643 244.944 -46.42 236.746 -32.283 241.338 C -30.716 241.847 -28.945 242.665 -26.927 243.876 C -22.43 246.574 -12.746 251.843 -8.77 249.543 C -1.853 245.543 2.597 236.946 10.033 236.946 C 16.949 236.946 24.712 253.226 30.591 252.726 C 36.005 252.726 37.248 247.821 45.21 237.828 C 47.699 234.703 56.202 236.853 58.714 239.821 C 64.908 247.14 67.85 251.477 73.238 251.064 C 79.046 251.064 86.271 239.927 93.014 235.533 C 94.758 234.396 96.57 234.815 98.327 235.772 C 108.638 241.389 109.913 244.487 116.422 244.876 C 122.232 245.224 132.676 243.376 139.247 243.376 C 159.651 243.376 151.351 243.376 162.937 243.376 C 181.438 243.376 181.954 244.543 203.399 244.543 C 229.856 244.543 214.984 242.709 272.22 243.376"
      stroke-width="1"
      fill="none"
      style="stroke: rgb(189, 255, 177); transform-origin: 23.22px 243.793px;"
      transform="matrix(0, -1, 1, 0, -0.000001, 0.000006)"
    ></path>
    <path
      d="M -226.04 249.452 C -175.03 249.119 -124.192 249.717 -94.45 249.717 C -85.64 248.512 -79.805 248.224 -75.128 248.329 C -60.903 248.649 -46.68 256.847 -32.543 252.255 C -30.976 251.746 -29.205 250.928 -27.187 249.717 C -22.69 247.019 -13.006 241.75 -9.03 244.05 C -2.113 248.05 2.337 256.647 9.773 256.647 C 16.689 256.647 24.452 240.367 30.331 240.867 C 35.745 240.867 36.988 245.772 44.95 255.765 C 47.439 258.89 55.942 256.74 58.454 253.772 C 64.648 246.453 67.59 242.116 72.978 242.529 C 78.786 242.529 86.011 253.666 92.754 258.06 C 94.498 259.197 96.31 258.778 98.067 257.821 C 108.378 252.204 109.653 249.106 116.162 248.717 C 121.972 248.369 132.416 250.217 138.987 250.217 C 159.391 250.217 151.091 250.217 162.677 250.217 C 181.178 250.217 181.694 249.05 203.139 249.05 C 229.596 249.05 214.724 250.884 271.96 250.217"
      stroke-width="1"
      fill="none"
      style="stroke: rgb(255, 177, 235); transform-origin: 22.96px 249.8px;"
      transform="matrix(-0.000001, 1, -1, -0.000001, 0.000008, 0.000003)"
    />

    <path
      d="M -225.462 247.377 C -174.452 247.71 -123.614 247.112 -93.872 247.112 C -85.062 248.317 -79.059 247.25 -74.55 248.5 C -52.817 254.527 -42.247 255.779 -31.965 244.574 C -30.851 243.36 -14.929 241.107 -12.911 242.318 C -8.414 245.016 6.521 255.536 10.497 253.236 C 17.414 249.236 19.124 240.867 26.56 240.867 C 33.476 240.867 41.239 254.407 47.118 253.907 C 53.062 252.141 53.14 249.295 58.998 246.315 C 62.559 244.504 66.337 237.578 68.849 240.546 C 75.043 247.865 84.606 254.713 89.994 254.3 C 95.802 254.3 100.287 256.633 107.03 252.239 C 108.774 251.102 116.5 249.229 118.307 248.37 C 126.415 244.516 126.914 246.807 130.464 246.566 C 136.301 246.17 133.027 246.02 139.565 246.612 C 159.886 248.453 151.669 246.612 163.255 246.612 C 181.756 246.612 182.272 247.779 203.717 247.779 C 230.174 247.779 215.302 245.945 272.538 246.612"
      stroke-width="2"
      fill="none"
      stroke-dashoffset="0px"
      stroke-dasharray="0.9868097552857346px 1px"
      style="stroke: rgb(255, 245, 177); transform-origin: 23.538px 247.029px;"
      transform="matrix(0, -1, 1, 0, 0.000006, 0.000014)"
    ></path>
  </svg>
</div>

<style>
  div {
    position: absolute;
    top: 0;
    left: -40px;
    bottom: 0;
    right: 0;
    width: 50px;
    height: 100%;
    z-index: -1;
  }

  svg {
    width: 100%;
    height: 100%;
  }
</style>
