<script lang="ts">
  // import { paintOnScroll } from "$lib/utils/paint-on-scroll";

  const paintOnScroll = (node: SVGElement) => {
    const paths = node.querySelectorAll("path");

    const paint = () => {
      const scrollPercentage =
        (document.documentElement.scrollTop + document.body.scrollTop) /
        (document.documentElement.scrollHeight -
          document.documentElement.clientHeight);

      paths.forEach((path) => {
        const pathLength = path.getTotalLength();

        if (
          !path.getAttribute("stroke-dasharray") ||
          !path.getAttribute("stroke-dashoffset")
        ) {
          path.setAttribute("stroke-dasharray", pathLength.toString());
          path.setAttribute("stroke-dashoffset", pathLength.toString());
        }

        let drawLength = pathLength * scrollPercentage;
        path.setAttribute(
          "stroke-dashoffset",
          (pathLength - drawLength).toString()
        );
      });
    };

    paint();

    window.addEventListener("scroll", paint);

    return {
      destroy() {
        window.removeEventListener("scroll", paint);
      },
    };
  };
</script>

<div>
  <svg
    use:paintOnScroll
    viewBox="0 0 50 500"
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="none"
  >
    <path
      d="M -226.862 249.295 C -208.396 249.174 -188.514 249.969 -168.837 248.889 C -161.828 248.504 -154.124 244.687 -147.525 244.959 C -142.095 245.183 -136.741 254.471 -131.784 254.346 C -125.177 254.179 -120.403 243.95 -114.793 244.291 C -104.422 244.921 -102.227 255.263 -94.45 255.263 C -85.64 254.058 -79.923 241.734 -75.246 241.839 C -61.021 242.159 -46.68 256.847 -32.543 252.255 C -30.976 251.746 -29.205 250.928 -27.187 249.717 C -22.69 247.019 -13.006 241.75 -9.03 244.05 C -2.113 248.05 2.337 256.647 9.773 256.647 C 16.689 256.647 24.452 240.367 30.331 240.867 C 35.745 240.867 36.988 245.772 44.95 255.765 C 47.439 258.89 55.942 256.74 58.454 253.772 C 64.648 246.453 67.59 242.116 72.978 242.529 C 78.786 242.529 86.011 253.666 92.754 258.06 C 94.498 259.197 96.31 258.778 98.067 257.821 C 108.378 252.204 109.653 249.106 116.162 248.717 C 121.972 248.369 132.416 250.217 138.987 250.217 C 159.391 250.217 151.091 250.217 162.677 250.217 C 181.178 250.217 181.694 249.05 203.139 249.05 C 229.596 249.05 223.698 249.538 280.934 248.871"
      stroke-width="2"
      fill="none"
      stroke="var(--string-two)"
      style="transform-origin: 22.96px 249.8px;"
      transform="matrix(-0.000001, 1, -1, -0.000001, 0.000019, 0.000005)"
    />
    <path
      d="M -225.176 249.273 C -208.594 249.383 -194.7 248.939 -180.336 249.359 C -174.783 249.521 -168.408 251.569 -162.899 251.215 C -157.421 250.863 -150.746 245.093 -145.405 245.003 C -138.78 244.892 -129.869 251.934 -123.841 251.691 C -113.368 251.269 -103.367 245.565 -95.357 245.565 C -86.547 246.77 -79.728 251.78 -75.051 251.675 C -60.826 251.355 -45.816 241.878 -31.679 246.47 C -30.112 246.979 -28.341 247.797 -26.323 249.008 C -21.826 251.706 -12.142 256.975 -8.166 254.675 C -1.249 250.675 3.201 242.078 10.637 242.078 C 17.553 242.078 25.316 258.358 31.195 257.858 C 36.609 257.858 37.852 252.953 45.814 242.96 C 48.303 239.835 56.806 241.985 59.318 244.953 C 65.512 252.272 68.454 256.609 73.842 256.196 C 79.65 256.196 86.875 245.059 93.618 240.665 C 95.362 239.528 97.174 239.947 98.931 240.904 C 109.242 246.521 110.517 249.619 117.026 250.008 C 122.836 250.356 133.28 248.508 139.851 248.508 C 160.255 248.508 151.955 248.508 163.541 248.508 C 182.042 248.508 182.558 249.675 204.003 249.675 C 230.46 249.675 224.707 248.384 281.943 249.051"
      stroke="var(--string-one)"
      stroke-width="2"
      fill="none"
      style="transform-box: fill-box; transform-origin: 50% 50%;"
      transform="matrix(0, 1, -1, 0, -4.559498, 4.559497)"
    />
    <path
      d="M -232.939 244.352 C -181.929 244.685 -123.932 243.876 -94.19 243.876 C -85.38 245.081 -79.545 245.369 -74.868 245.264 C -60.643 244.944 -46.42 236.746 -32.283 241.338 C -30.716 241.847 -28.945 242.665 -26.927 243.876 C -22.43 246.574 -12.746 251.843 -8.77 249.543 C -1.853 245.543 2.597 236.946 10.033 236.946 C 16.949 236.946 24.712 253.226 30.591 252.726 C 36.005 252.726 37.248 247.821 45.21 237.828 C 47.699 234.703 56.202 236.853 58.714 239.821 C 64.908 247.14 67.85 251.477 73.238 251.064 C 79.046 251.064 86.271 239.927 93.014 235.533 C 94.758 234.396 96.57 234.815 98.327 235.772 C 108.638 241.389 109.913 247.083 116.422 247.472 C 122.232 247.82 131.732 240.898 138.303 240.898 C 158.707 240.898 154.773 247.506 166.359 247.506 C 177.938 247.506 183.492 240.445 189.518 239.577 C 193.12 239.058 195.375 244.543 203.399 244.543 C 229.856 244.543 217.449 243.531 274.685 244.198"
      stroke-width="2"
      fill="none"
      stroke="var(--string-three)"
      style="transform-origin: 23.22px 243.793px;"
      transform="matrix(0, -1, 1, 0, -0.000001, 0.000006)"
    />
    <path
      d="M -229.426 247.272 C -178.416 247.605 -123.614 247.112 -93.872 247.112 C -85.062 248.317 -79.059 247.25 -74.55 248.5 C -52.817 254.527 -42.247 255.779 -31.965 244.574 C -30.851 243.36 -14.929 241.107 -12.911 242.318 C -8.414 245.016 6.521 255.536 10.497 253.236 C 17.414 249.236 19.124 240.867 26.56 240.867 C 33.476 240.867 41.239 254.407 47.118 253.907 C 53.062 252.141 54.247 250.648 59.244 245.823 C 62.118 243.048 67.987 238.051 71.554 239.599 C 81.658 243.985 88.968 256.269 94.299 255.899 C 101.952 252.086 112.035 236.331 119.699 242.646 C 128.523 249.916 132.463 253.633 136.265 252.674 C 144.97 250.479 149.668 241.272 153.218 241.031 C 159.055 240.635 163.043 256.13 169.329 254.238 C 177.105 251.897 181.005 243.202 187.362 244.275 C 192.119 245.078 192.715 247.41 203.717 247.779 C 218.449 248.273 220.896 246.347 278.132 247.014"
      stroke-width="2"
      fill="none"
      stroke="var(--string-four)"
      style="transform-origin: 23.538px 247.029px;"
      transform="matrix(0, -1, 1, 0, 0.000006, 0.000014)"
    /></svg
  >

  <!-- Blurred path -->
  <svg
    viewBox="0 0 50 500"
    style="filter: url(#gaussian-blur-filter-0);"
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="none"
    opacity="0.2"
  >
    <defs>
      <filter
        id="gaussian-blur-filter-0"
        color-interpolation-filters="sRGB"
        x="-50%"
        y="-50%"
        width="200%"
        height="200%"
      >
        <feGaussianBlur stdDeviation="2 2" edgeMode="none"></feGaussianBlur>
      </filter>
    </defs>
    <path
      d="M -225.176 249.273 C -208.594 249.383 -194.7 248.939 -180.336 249.359 C -174.783 249.521 -168.408 251.569 -162.899 251.215 C -157.421 250.863 -150.746 245.093 -145.405 245.003 C -138.78 244.892 -129.869 251.934 -123.841 251.691 C -113.368 251.269 -103.367 245.565 -95.357 245.565 C -86.547 246.77 -79.728 251.78 -75.051 251.675 C -60.826 251.355 -45.816 241.878 -31.679 246.47 C -30.112 246.979 -28.341 247.797 -26.323 249.008 C -21.826 251.706 -12.142 256.975 -8.166 254.675 C -1.249 250.675 3.201 242.078 10.637 242.078 C 17.553 242.078 25.316 258.358 31.195 257.858 C 36.609 257.858 37.852 252.953 45.814 242.96 C 48.303 239.835 56.806 241.985 59.318 244.953 C 65.512 252.272 68.454 256.609 73.842 256.196 C 79.65 256.196 86.875 245.059 93.618 240.665 C 95.362 239.528 97.174 239.947 98.931 240.904 C 109.242 246.521 110.517 249.619 117.026 250.008 C 122.836 250.356 133.28 248.508 139.851 248.508 C 160.255 248.508 151.955 248.508 163.541 248.508 C 182.042 248.508 182.558 249.675 204.003 249.675 C 230.46 249.675 224.707 248.384 281.943 249.051"
      stroke="var(--string-one)"
      stroke-width="2"
      fill="none"
      style="transform-box: fill-box; transform-origin: 50% 50%;"
      transform="matrix(0, 1, -1, 0, -4.559498, 4.559497)"
    />
    <path
      d="M -226.862 249.295 C -208.396 249.174 -188.514 249.969 -168.837 248.889 C -161.828 248.504 -154.124 244.687 -147.525 244.959 C -142.095 245.183 -136.741 254.471 -131.784 254.346 C -125.177 254.179 -120.403 243.95 -114.793 244.291 C -104.422 244.921 -102.227 255.263 -94.45 255.263 C -85.64 254.058 -79.923 241.734 -75.246 241.839 C -61.021 242.159 -46.68 256.847 -32.543 252.255 C -30.976 251.746 -29.205 250.928 -27.187 249.717 C -22.69 247.019 -13.006 241.75 -9.03 244.05 C -2.113 248.05 2.337 256.647 9.773 256.647 C 16.689 256.647 24.452 240.367 30.331 240.867 C 35.745 240.867 36.988 245.772 44.95 255.765 C 47.439 258.89 55.942 256.74 58.454 253.772 C 64.648 246.453 67.59 242.116 72.978 242.529 C 78.786 242.529 86.011 253.666 92.754 258.06 C 94.498 259.197 96.31 258.778 98.067 257.821 C 108.378 252.204 109.653 249.106 116.162 248.717 C 121.972 248.369 132.416 250.217 138.987 250.217 C 159.391 250.217 151.091 250.217 162.677 250.217 C 181.178 250.217 181.694 249.05 203.139 249.05 C 229.596 249.05 223.698 249.538 280.934 248.871"
      stroke-width="2"
      fill="none"
      stroke="var(--string-two)"
      style="transform-origin: 22.96px 249.8px;"
      transform="matrix(-0.000001, 1, -1, -0.000001, 0.000019, 0.000005)"
    />
    <path
      d="M -232.939 244.352 C -181.929 244.685 -123.932 243.876 -94.19 243.876 C -85.38 245.081 -79.545 245.369 -74.868 245.264 C -60.643 244.944 -46.42 236.746 -32.283 241.338 C -30.716 241.847 -28.945 242.665 -26.927 243.876 C -22.43 246.574 -12.746 251.843 -8.77 249.543 C -1.853 245.543 2.597 236.946 10.033 236.946 C 16.949 236.946 24.712 253.226 30.591 252.726 C 36.005 252.726 37.248 247.821 45.21 237.828 C 47.699 234.703 56.202 236.853 58.714 239.821 C 64.908 247.14 67.85 251.477 73.238 251.064 C 79.046 251.064 86.271 239.927 93.014 235.533 C 94.758 234.396 96.57 234.815 98.327 235.772 C 108.638 241.389 109.913 247.083 116.422 247.472 C 122.232 247.82 131.732 240.898 138.303 240.898 C 158.707 240.898 154.773 247.506 166.359 247.506 C 177.938 247.506 183.492 240.445 189.518 239.577 C 193.12 239.058 195.375 244.543 203.399 244.543 C 229.856 244.543 217.449 243.531 274.685 244.198"
      stroke-width="2"
      fill="none"
      stroke="var(--string-three)"
      style="transform-origin: 23.22px 243.793px;"
      transform="matrix(0, -1, 1, 0, -0.000001, 0.000006)"
    />
    <path
      d="M -229.426 247.272 C -178.416 247.605 -123.614 247.112 -93.872 247.112 C -85.062 248.317 -79.059 247.25 -74.55 248.5 C -52.817 254.527 -42.247 255.779 -31.965 244.574 C -30.851 243.36 -14.929 241.107 -12.911 242.318 C -8.414 245.016 6.521 255.536 10.497 253.236 C 17.414 249.236 19.124 240.867 26.56 240.867 C 33.476 240.867 41.239 254.407 47.118 253.907 C 53.062 252.141 54.247 250.648 59.244 245.823 C 62.118 243.048 67.987 238.051 71.554 239.599 C 81.658 243.985 88.968 256.269 94.299 255.899 C 101.952 252.086 112.035 236.331 119.699 242.646 C 128.523 249.916 132.463 253.633 136.265 252.674 C 144.97 250.479 149.668 241.272 153.218 241.031 C 159.055 240.635 163.043 256.13 169.329 254.238 C 177.105 251.897 181.005 243.202 187.362 244.275 C 192.119 245.078 192.715 247.41 203.717 247.779 C 218.449 248.273 220.896 246.347 278.132 247.014"
      stroke-width="2"
      fill="none"
      stroke="var(--string-four)"
      style="transform-origin: 23.538px 247.029px;"
      transform="matrix(0, -1, 1, 0, 0.000006, 0.000014)"
    />
  </svg>
</div>

<style>
  :root {
    --string-one: var(--color-primary);
    --string-two: var(--color-secondary);
    --string-three: pink;
    --string-four: rgb(59, 97, 107);
  }

  div {
    --left-offset: 35px;

    position: absolute;
    top: 0;
    left: calc(var(--left-offset) * -1);
    width: var(--left-offset);
    height: 100%;
    z-index: -1;
  }

  svg {
    position: absolute;
    width: 100%;
    height: 100%;
  }
</style>
